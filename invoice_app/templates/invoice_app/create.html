{% extends 'dashboard/inc/master.html' %}

{% load static %}

{% block title %}
    Invoices
{% endblock title %}

{% block customcss %}

{% endblock customcss %}

{% block pagename %}
    Add New Invoice
{% endblock pagename %}


{% block dashboard_content %}
    <!--begin::Row-->

    <div class="container">
        <div class="row">
            <div class="col">
                <div class="card card-custom gutter-b">
                    <div class="card-header">
                        <div class="card-title">
                            <h3 class="card-label">
                                New Invoice
                                <!-- <small><i class="icon-sm la la-plus"></i></small> -->
                            </h3>
                        </div>
                    </div>
                    <div class="card-body">
                        <!--begin::Form-->
                        <form class="kt-form kt-form--label-right" method="POST">
                            {% csrf_token %}
                            <div class="kt-portlet__body">
                                <div class="form-group row">
                                    <div class="col-lg-4">
                                        <label>Invoice Number:</label>
                                        <input type="email" class="form-control" placeholder="GS 000014">
                                        <span class="form-text text-muted">Please enter Invoice Number, <button
                                                type="button"
                                                data-toggle="modal"
                                                data-target="#lastInvoicesModel"
                                                class="btn btn-sm btn-outline-hover-brand text-primary border-0 p-0">sse last 5 invoices</button>
                                or <button type="button" class="btn btn-sm btn-outline-hover-brand border-0 p-0">Generate Random Number</button>
                            </span>
                                    </div>
                                    <div class="col-lg-4">
                                        <label class="">Member:</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend"><span class="input-group-text"><i
                                                    class="la la-user"></i></span></div>
                                            <input type="text" list="membersList" class="form-control" placeholder="">
                                        </div>
                                        <datalist id="membersList">
                                            <option value="Member 1">
                                            <option value="Member 2">
                                            <option value="Member 3">
                                            <option value="Member 4">
                                            <option value="Member 5">
                                        </datalist>
                                    </div>
                                    <div class="col-lg-4">
                                        <label class="">Invoice Date</label>
                                        <div class="input-group date">
                                            <input type="text" class="form-control" readonly="readonly"
                                                   value="05/20/2017" id="kt_datepicker_3"/>
                                            <div class="input-group-append">
                                    <span class="input-group-text">
                                        <i class="la la-calendar"></i>
                                    </span>
                                            </div>
                                        </div>
                                        <span class="form-text text-muted">Enable clear and today helper buttons</span>
                                    </div>

                                </div>
                                <div class="form-group row">
                                    <div class="col-lg-4">
                                        <label class="">Status:</label>
                                        <select name="" id="" class="form-control custom-select">
                                            <option value="pending">Pending</option>
                                            <option value="processing">Processing</option>
                                            <option value="draft">Draft</option>
                                            <option value="cancelled">Cancelled</option>
                                            <option value="completed">Completed</option>
                                        </select>
                                        <span class="form-text text-muted"></span>
                                    </div>
                                    <div class="col-lg-4">
                                        <label>Due Date:</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend"><span class="input-group-text">
                                    <i class="la la-calendar"></i></span></div>
                                            <input type="date" class="form-control" placeholder="">
                                        </div>
                                        <span class="form-text text-muted">Please Pick the Due Date</span>
                                    </div>
                                    <div class="col-lg-4">
                                        <label>Payment</label>
                                        <div class="kt-checkbox-inline">
                                            <label class="kt-checkbox kt-checkbox--solid kt-checkbox--success">
                                                <input type="checkbox"> Paid
                                                <span></span>
                                            </label>

                                        </div>
                                        <span class="form-text text-muted">Is this invoice paid</span>

                                    </div>
                                </div>


                                <div class="form-group row">
                                    <div class="col-lg-2">
                                        <p class="text-center" style="margin-top: 12px;">
                                            <label class="">Descriptions:</label>
                                        </p>
                                    </div>
                                    <div class="col-lg-10">
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-borderless" id="addInvoiceTable">
                                                <thead>
                                                <tr>

                                                    <th>DESCRIPTION NAME</th>
                                                    <th>RATE</th>
                                                    <th>PRICE</th>
                                                    <th></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>

                                                    <td>
                                                        <input type="text" class="form-control"
                                                               name="item_description[]" placeholder="Description Name">
                                                    </td>
                                                    <td>
                                                        <input type="number" class="form-control" name="item_rate[]"
                                                               placeholder="0">
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend"><span
                                                                    class="input-group-text">
                                                     <i class="fa fa-dollar-sign"></i></span></div>
                                                            <input type="text" class="form-control" name="price[]"
                                                                   placeholder="$0">
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-outline-hover-danger"
                                                                id="deleteTableRowInvBtn"
                                                                data-toggle="tooltip" title="Delete">
                                                            <i class="fa fa-minus"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td>
                                                        <input type="text" class="form-control"
                                                               name="item_description[]" placeholder="Description Name">
                                                    </td>
                                                    <td>
                                                        <input type="number" class="form-control" name="item_rate[]"
                                                               placeholder="0">
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend"><span
                                                                    class="input-group-text">
                                                     <i class="fa fa-dollar-sign"></i></span></div>
                                                            <input type="text" class="form-control" name="price[]"
                                                                   placeholder="$0">
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-outline-hover-danger"
                                                                id="deleteTableRowInvBtn"
                                                                data-toggle="tooltip" title="Delete">
                                                            <i class="fa fa-minus"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td>
                                                        <input type="text" class="form-control"
                                                               name="item_description[]" placeholder="Description Name">
                                                    </td>
                                                    <td>
                                                        <input type="number" class="form-control" name="item_rate[]"
                                                               placeholder="0">
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend"><span
                                                                    class="input-group-text">
                                                     <i class="fa fa-dollar-sign"></i></span></div>
                                                            <input type="text" class="form-control" name="price[]"
                                                                   placeholder="$0">
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-outline-hover-danger"
                                                                id="deleteTableRowInvBtn"
                                                                data-toggle="tooltip" title="Delete">
                                                            <i class="fa fa-minus"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                                </tbody>

                                            </table>
                                            <div class="form-group row">
                                                <div class="col-md-5">
                                                    <p>
                                                        <button type="button" id="addProductInvoiceBtn"
                                                                class="btn btn-primary btn-shadow font-weight-bold mr-2 ">
                                                            New Description
                                                        </button>
                                                        <button type="button" id="descriptionCalculateBtn"
                                                                class="btn btn-success btn-shadow-hover font-weight-bold mr-2">
                                                            Calculate
                                                        </button>
                                                    </p>
                                                </div>
                                                <div class="col-md-7">
                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Discount:</label>
                                                        <div class="col-lg-6">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend"><span
                                                                        class="input-group-text">
                                                    <i class="fa fa-percentage"></i></span></div>
                                                                <input type="number" max="100" value="0"
                                                                       class="form-control">
                                                            </div>
                                                            <span class="form-text text-muted"></span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <label class="col-lg-3 col-form-label">Total:</label>
                                                        <div class="col-lg-6">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend"><span
                                                                        class="input-group-text">
                                                    <i class="fa fa-dollar-sign"></i></span></div>
                                                                <input type="text" disabled="disabled" max="100"
                                                                       value="$0"
                                                                       class="form-control">
                                                            </div>
                                                            <span class="form-text text-muted">Dynamically Calculate it</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-lg-4">
                                        <label>Notes:</label>
                                        <textarea class="form-control" rows="3"></textarea>
                                        <span class="form-text text-muted">Optional Notes</span>
                                    </div>
                                    <div class="col-lg-4">
                                        <label>Footer:</label>
                                        <textarea class="form-control" rows="3"></textarea>
                                        <span class="form-text text-muted">Optional Footer</span>
                                    </div>
                                </div>
                            </div>
                            <div class="kt-portlet__foot">
                                <div class="kt-form__actions">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <button type="submit" class="btn btn-primary">Save</button>
                                        </div>
                                        <div class="col-lg-6 text-right">
                                            <button type="reset" class="btn btn-danger btn-elevate">
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <!--end::Form-->
                    </div>
                </div>
            </div>
        </div>
    </div>



    {% include "invoice_app/inc/last_5_invoices_modal.html" %}



    <!--End::Row-->
{% endblock dashboard_content %}

{% block customjs %}
    <!--begin::Page Scripts(used by this page)-->
    <script src="{% static 'dashboard/assets/js/pages/crud/forms/widgets/bootstrap-datepicker.js' %}"></script>
    <!--end::Page Scripts-->
    <script>
        $(document).ready(function () {
            // input group layout
            $('.input-group.date').datepicker({
                rtl: KTUtil.isRTL(),
                todayHighlight: true,
                orientation: "bottom left",
                templates: arrows
            });

        });


        // this code to make new row when add new product
        $("#addProductInvoiceBtn").click(function () {
            $("#addInvoiceTable").each(function () {
                var tds = '<tr>';
                jQuery.each($('tr:last td', this), function () {
                    tds += '<td>' + $(this).html() + '</td>';
                });
                tds += '</tr>';
                if ($('tbody', this).length > 0) {
                    $('tbody', this).append(tds);
                } else {
                    $(this).append(tds);
                }
            });
        });

        // this for delete row when user delete the row
        $('#addInvoiceTable').on('click', "#deleteTableRowInvBtn", function () {
            $(this).closest('tr').remove();
        });


    </script>
{% endblock customjs %}